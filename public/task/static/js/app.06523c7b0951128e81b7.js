webpackJsonp([2,0],{0:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}var i=a(33),n=s(i),o=a(102),r=s(o),u=a(103),m=s(u);a(101),a(96),n.default.use(r.default),new n.default({el:"#app",template:"<App/>",components:{App:m.default}})},34:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(59),n=s(i),o=a(35),r=s(o),u=a(33),m=s(u),l=a(111),d=s(l);m.default.use(d.default),e.default={getUser:function(t,e){console.log(t);var a="";for(var s in t)a+="&"+s+"="+t[s];console.log("get user itemStr: "+a),m.default.http.get(r.default.HOST+"/user/get?"+a).then(function(t){e&&e(t.data)})},saveUser:function(t,e){m.default.http.post(r.default.HOST+"/user/save",t,{emulateJSON:!0}).then(function(t){e&&e(t.data)})},fetch:function(t,e){var a="";for(var s in t)a+="&"+s+"="+t[s];m.default.http.get(r.default.HOST+"/getTask?"+a).then(function(t){e&&e(t.data)})},save:function(t,e){return"object"!==("undefined"==typeof t?"undefined":(0,n.default)(t))?void alert("Please save taskList is a object."):void m.default.http.post(r.default.HOST+"/saveTask",t,{emulateJSON:!0}).then(function(t){e&&e(t.data)})},update:function(t,e){m.default.http.post(r.default.HOST+"/updateTask",t,{emulateJSON:!0}).then(function(t){e&&e(t.data)})},delete:function(t,e){m.default.http.post(r.default.HOST+"/deleteTask",{_id:t},{emulateJSON:!0}).then(function(t){e&&e(t.data)})}}},35:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={HOST:"http://127.0.0.1",TASK:{PROGRESS:{NOTDOWN:"0",DOWN:"1"},LEVEL:{HIGH:"1",MID:"2",LOW:"3"}}}},50:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(104),n=s(i);e.default={name:"app",data:function(){return{user:{uuid:"",name:""},userCreate:{uuid:"",name:""}}},methods:{},components:{TaskList:n.default}}},51:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(34),n=s(i),o=a(35),r=(s(o),a(105)),u=s(r),m=a(106),l=s(m);e.default={data:function(){return{showModal:!1,user:"",taskType:[],taskTypePlan:!0,taskTypeDoing:!1,taskTypeDone:!1,taskListTitle:[{type:"selection",width:60,align:"center"},{title:"分类",key:"type"},{title:"任务描述",key:"name"},{title:"优先级",key:"level"},{title:"备注",key:"memo"},{title:"计划完成",key:"planTime"},{title:"开始时间",key:"startTime"},{title:"结束时间",key:"endTime"}],taskList:[],task:{},isAddTask:!1,isShowTips:!1,active:-1,isEdit:!1,pageNumber:1,curPageNumber:0,offset:0}},methods:{addTask:function(){this.$refs.addTask.showModal()},addSuccess:function(){console.log("success"),this.getTaskList()},editTask:function(t){this.$refs.addTask.showModal(t)},updateTime:function(t){var e=this,a=(new Date).getTime(),s={_id:t._id};t.startTime?s.endTime=a:s.startTime=a,n.default.update(s,function(t){t.success&&e.getTaskList()})},getTaskList:function(){var t=this,e={};n.default.fetch(e,function(e){e.success&&(t.taskList=e.data)})},delTask:function(t){var e=this;if(this.active===-1)return void this.$Notice.warning({title:"请选择你要操作的数据",duration:2});var t=this.taskList[this.active];n.default.delete(t._id,function(a){if(a.success)for(var s=0;s<e.taskList.length;s++)if(e.taskList[s]._id===t._id)return e.taskList.splice(s,1),void(e.active=-1)})}},created:function(){this.getTaskList()},components:{addTask:u.default,vTime:l.default},watch:{}}},52:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(56),n=s(i),o=a(55),r=s(o),u=a(34),m=s(u);e.default={data:function(){return{show:!1,isNew:!0,taskItem:{level:"1",type:"",name:"",planTime:"",startTime:"",endTime:"",memo:""},ruleValidate:{type:[{required:!0,message:"类型不能为空",trigger:"blur"}],name:[{required:!0,message:"描述不能为空",trigger:"blur"}]}}},methods:{showModal:function(t){this.show=!0,t?(this.isNew=!1,this.taskItem=JSON.parse((0,r.default)(t)),this.taskItem.planTime&&(this.taskItem.planTime=new Date(Number(this.taskItem.planTime))),this.taskItem.startTime&&(this.taskItem.startTime=new Date(Number(this.taskItem.startTime))),this.taskItem.endTime&&(this.taskItem.endTime=new Date(Number(this.taskItem.endTime)))):this.isNew=!0},validate:function(t){var e=this;return new n.default(function(a){e.$refs[t].validate(function(t){a(t?!0:!1)})})},ok:function(){var t=this;return this.validate("taskItem").then(function(e){e&&(t.$emit("input",!1),t.taskItem.planTime&&(t.taskItem.planTime=new Date(t.taskItem.planTime).getTime()),t.taskItem.startTime&&(t.taskItem.startTime=new Date(t.taskItem.startTime).getTime()),t.taskItem.endTime&&(t.taskItem.endTime=new Date(t.taskItem.endTime).getTime()),t.taskItem._id?m.default.update(t.taskItem,function(e){e.success&&(t.$emit("on-success"),t.cancel())}):m.default.save(t.taskItem,function(e){e.success&&(t.$emit("on-success"),t.cancel())}))}),!1},cancel:function(){var t=this;this.show=!1,this.$emit("input",!1),window.setTimeout(function(){t.$refs.taskItem.resetFields(),t.taskItem={level:"1",type:"",name:"",planTime:"",memo:""}},250)},change:function(t){}},watch:{},props:{data:{type:Array}},created:function(){console.log(this.data)}}},53:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(54),n=s(i);e.default={data:function(){return{oldTimeStr:"",time:this.data,timeStr:""}},methods:{recordTime:function(){this.oldTimeStr=n.default.format(this.time,this.format)},testTime:function(){n.default.testTime(this.timeStr,this.format)?(this.time=n.default.arcFormat(this.timeStr,this.format),this.$emit("change",this.time)):this.timeStr=this.oldTimeStr}},watch:{data:function(t){this.time=t}},props:["data","format"],created:function(){this.timeStr=n.default.format(this.time||(new Date).getTime(),this.format),this.time||(this.time=n.default.arcFormat(this.timeStr,this.format),this.$emit("change",this.time))}}},54:function(t,e){"use strict";function a(t){return t<10?"0"+t:t}Object.defineProperty(e,"__esModule",{value:!0}),e.default={format:function(t,e){var s=new Date(parseInt(t)),i=s.getMonth()+1,n=s.getDate(),o=s.getHours(),r=s.getMinutes();return"mm-dd"===e?a(i)+"-"+a(n):a(i)+"-"+a(n)+" "+a(o)+":"+a(r)},testTime:function(t,e){var a="mm-dd"===e?"^(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$":"^(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) ([0-1][0-9]|2[0-3]):[0-5][0-9]$",s=RegExp(a);return!!s.test(t)},arcFormat:function(t,e){if("mm-dd"===e){var a=864e5-1,s=new Date("2017/"+t.split("-")[0]+"/"+t.split("-")[1]).getTime()+a;return s}}}},96:function(t,e){},97:function(t,e){},98:function(t,e){},99:function(t,e){},100:function(t,e){},101:function(t,e){},103:function(t,e,a){a(100);var s=a(20)(a(50),a(110),null,null);t.exports=s.exports},104:function(t,e,a){a(98);var s=a(20)(a(51),a(108),null,null);t.exports=s.exports},105:function(t,e,a){a(99);var s=a(20)(a(52),a(109),null,null);t.exports=s.exports},106:function(t,e,a){a(97);var s=a(20)(a(53),a(107),null,null);t.exports=s.exports},107:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"v-time"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.timeStr,expression:"timeStr"}],staticClass:"time-input",attrs:{type:"text"},domProps:{value:t._s(t.timeStr)},on:{focus:t.recordTime,blur:t.testTime,input:function(e){e.target.composing||(t.timeStr=e.target.value)}}})])},staticRenderFns:[]}},108:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-list",attrs:{id:"task-list"}},[a("add-task",{ref:"addTask",on:{"on-success":t.addSuccess}}),t._v(" "),a("div",{staticClass:"task-table-box"},[a("h2",[t._v("欢迎，记录您的任务便于享受更好的功能")]),t._v(" "),a("div",{staticClass:"tool-box"},[a("Button",{attrs:{type:"ghost"},on:{click:t.addTask}},[t._v("添加")]),t._v(" "),a("Button",{attrs:{type:"ghost"},on:{click:t.delTask}},[t._v("删除")])],1),t._v(" "),a("div",{staticClass:"task-card"},t._l(t.taskList,function(e,s){return a("div",{staticClass:"task-item-box",on:{click:function(a){t.editTask(e)}}},[a("span",{staticClass:"task-item"},[t._v(t._s(e.type))]),t._v(" "),a("span",{staticClass:"task-item"},[t._v(t._s(e.name))]),t._v(" "),e.startTime?t._e():a("span",{staticClass:"task-item task-item-time",on:{click:function(a){a.stopPropagation(),t.updateTime(e)}}},[a("Icon",{attrs:{type:"play"}})],1),t._v(" "),e.startTime&&!e.endTime?a("span",{staticClass:"task-item task-item-time",on:{click:function(a){a.stopPropagation(),t.updateTime(e)}}},[a("Icon",{attrs:{type:"stop"}})],1):t._e()])}))])],1)},staticRenderFns:[]}},109:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{directives:[{name:"model",rawName:"v-model",value:t.show,expression:"show"}],attrs:{title:"添加任务"},domProps:{value:t.show},on:{input:function(e){t.show=e}}},[a("Form",{ref:"taskItem",attrs:{model:t.taskItem,rules:t.ruleValidate,"label-width":80}},[a("Form-item",{attrs:{label:"优先级",prop:"level"}},[a("Select",{directives:[{name:"model",rawName:"v-model",value:t.taskItem.level,expression:"taskItem.level"}],domProps:{value:t.taskItem.level},on:{input:function(e){t.taskItem.level=e}}},[a("Option",{attrs:{value:"1"}},[t._v("紧急重要")]),t._v(" "),a("Option",{attrs:{value:"2"}},[t._v("紧急不重要")]),t._v(" "),a("Option",{attrs:{value:"3"}},[t._v("不紧急重要")]),t._v(" "),a("Option",{attrs:{value:"4"}},[t._v("不紧急不重要")])],1)],1),t._v(" "),a("Form-item",{attrs:{label:"分类",prop:"type"}},[a("Input",{directives:[{name:"model",rawName:"v-model",value:t.taskItem.type,expression:"taskItem.type"}],attrs:{placeholder:"请输入分类"},domProps:{value:t.taskItem.type},on:{input:function(e){t.taskItem.type=e}}})],1),t._v(" "),a("Form-item",{attrs:{label:"描述",prop:"name"}},[a("Input",{directives:[{name:"model",rawName:"v-model",value:t.taskItem.name,expression:"taskItem.name"}],attrs:{placeholder:"请输入描述"},domProps:{value:t.taskItem.name},on:{input:function(e){t.taskItem.name=e}}})],1),t._v(" "),a("Form-item",{attrs:{label:"计划完成"}},[a("Date-picker",{directives:[{name:"model",rawName:"v-model",value:t.taskItem.planTime,expression:"taskItem.planTime"}],attrs:{type:"date",editable:!1,placeholder:"选择日期"},domProps:{value:t.taskItem.planTime},on:{input:function(e){t.taskItem.planTime=e}}})],1),t._v(" "),t.isNew?t._e():a("Form-item",{attrs:{label:"开始时间"}},[a("Date-picker",{directives:[{name:"model",rawName:"v-model",value:t.taskItem.startTime,expression:"taskItem.startTime"}],attrs:{type:"date",editable:!1,placeholder:"选择日期"},domProps:{value:t.taskItem.startTime},on:{input:function(e){t.taskItem.startTime=e}}})],1),t._v(" "),t.isNew?t._e():a("Form-item",{attrs:{label:"结束时间"}},[a("Date-picker",{directives:[{name:"model",rawName:"v-model",value:t.taskItem.endTime,expression:"taskItem.endTime"}],attrs:{type:"date",editable:!1,placeholder:"选择日期"},domProps:{value:t.taskItem.endTime},on:{input:function(e){t.taskItem.endTime=e}}})],1),t._v(" "),a("Form-item",{attrs:{label:"备注"}},[a("Input",{directives:[{name:"model",rawName:"v-model",value:t.taskItem.memo,expression:"taskItem.memo"}],attrs:{type:"textarea",autosize:{minRows:3}},domProps:{value:t.taskItem.memo},on:{input:function(e){t.taskItem.memo=e}}})],1)],1),t._v(" "),a("div",{slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("确定")]),t._v(" "),a("Button",{attrs:{type:"ghost"},on:{click:t.cancel}},[t._v("取消")])],1)],1)},staticRenderFns:[]}},110:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app"},[a("task-list")],1)},staticRenderFns:[]}},112:function(t,e){}});
//# sourceMappingURL=app.06523c7b0951128e81b7.js.map